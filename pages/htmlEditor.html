<form style="flex: 1; width: 100%; height: 100%;" onsubmit="sendHtml(event)">
    <div id="editor" style="height: 100%; width: 100%;"></div>
    <button type="submit">UPDATE PAGE</button>
  </form>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
  <script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/html");
    editor.setOptions({
        maxLines: Infinity,
        autoScrollEditorIntoView: true,
    });
  
    async function sendHtml(e) {
      e.preventDefault();
  
      const html = editor.getValue();
  
      const response = await fetch('http://localhost:3000/api/pages/' + localStorage.getItem('pageToEditor'), {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          "html": html
        })
      });
  
      const result = await response.text();
      let main = document.querySelector('main');
      main.innerHTML = result;
  
      const scripts = main.querySelectorAll('script');
      scripts.forEach((script) => {
        const newScript = document.createElement('script');
        newScript.textContent = script.textContent;
        document.body.appendChild(newScript).parentNode.removeChild(newScript);
      });
    }
  </script>
  